select `topics`.*, `groups`.`name` as `group_name`, (SELECT COUNT(*) FROM topic_comments WHERE topic_id=topics.id) as total_comments, (SELECT COUNT(*) FROM topic_likes WHERE topic_id=topics.id AND type='1') as total_likes, (SELECT COUNT(*) FROM topic_likes WHERE topic_id=topics.id AND type='0') as total_dislikes, (SELECT count(*) FROM users WHERE id IN (SELECT user_id FROM topic_comments WHERE topic_id=topics.id) AND id IN (SELECT user_id FROM user_groups WHERE group_id=topics.group_id) as user_group_reaction, (SELECT count(*) FROM users WHERE id NOT IN (SELECT user_id FROM topic_comments WHERE topic_id=topics.id) AND id IN (SELECT user_id FROM user_groups WHERE group_id=topics.group_id) as user_group_noreaction from `topics` inner join `groups` on `groups`.`id` = `topics`.`group_id` order by `id` desc
